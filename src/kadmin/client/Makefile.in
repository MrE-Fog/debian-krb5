BUILDTOP=@BUILDTOP@
srcdir = @srcdir@
VPATH = @srcdir@
 
DEFS = @DEFS@
CC = @CC@
CCOPTS = @CCOPTS@
LIBS = @LIBS@
KRB5ROOT = @KRB5ROOT@
 
CFLAGS = $(CCOPTS) $(DEFS) $(LOCALINCLUDE)
LDFLAGS = -g

KRB5MANROOT = $(KRB5ROOT)/man
ADMIN_BINDIR = $(KRB5ROOT)/admin
SERVER_BINDIR = $(KRB5ROOT)/sbin
CLIENT_BINDIR = $(KRB5ROOT)/bin
ADMIN_MANDIR = $(KRB5MANROOT)/man8
SERVER_MANDIR = $(KRB5MANROOT)/man8
CLIENT_MANDIR = $(KRB5MANROOT)/man1
FILE_MANDIR = $(KRB5MANROOT)/man5
KRB5_LIBDIR = $(KRB5ROOT)/lib
KRB5_INCDIR = $(KRB5ROOT)/include
KRB5_INCSUBDIRS = \
	$(KRB5_INCDIR)/krb5 \
	$(KRB5_INCDIR)/asn.1 \
	$(KRB5_INCDIR)/kerberosIV

SRCTOP = $(srcdir)/$(BUILDTOP)
TOPLIBD = $(BUILDTOP)/lib
ISODELIB=$(TOPLIBD)/libisode.a
COMERRLIB=$(BUILDTOP)/util/et/libcom_err.a
SSLIB=$(BUILDTOP)/util/ss/libss.a
DBMLIB=
KDBLIB=$(TOPLIBD)/libkdb5.a 

RM = rm -f

all::

KLIB = $(TOPLIBD)/libkrb5.a $(TOPLIBD)/libcrypto.a $(ISODELIB) $(SSLIB) $(COMERRLIB) $(DBMLIB)

DEPLIBS = $(DEPKDBLIB) $(DEPKLIB)
LOCAL_LIBRARIES = $(KDBLIB) $(KLIB)


SRCS = \
	$(srcdir)/kadmin.c \
	$(srcdir)/kadmin_add.c \
	$(srcdir)/kadmin_adr.c \
	$(srcdir)/kadmin_cpr.c \
	$(srcdir)/kadmin_inq.c \
	$(srcdir)/kadmin_msnd.c \
	$(srcdir)/kadmin_mod.c \
	$(srcdir)/kadmin_cpw.c \
	$(srcdir)/kadmin_del.c \
	$(srcdir)/kadmin_done.c

OBJS = \
	kadmin.o \
	kadmin_add.o \
	kadmin_adr.o \
	kadmin_cpr.o \
	kadmin_inq.o \
	kadmin_msnd.o \
	kadmin_mod.o \
	kadmin_cpw.o \
	kadmin_del.o \
	kadmin_done.o

all::	kadmin

kadmin: $(KDBDEPLIB) $(OBJS) $(DEBKLIB)
	$(CC) $(CFLAGS) -o kadmin $(OBJS) $(KLIB) $(LIBS)

install::
	cp kadmin ${DESTDIR}$(CLIENT_BINDIR)/kadmin
	cp kadmin.M ${DESTDIR}$(CLIENT_MANDIR)/kadmin.1

clean::
	$(RM) kadmin

clean::
	$(RM) $(OBJS)

