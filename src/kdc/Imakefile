#	$Source$
#	$Author$
#	$Id$
#
#  Copyright 1990,1991 by the Massachusetts Institute of Technology.
#  All Rights Reserved.
# 
#  For copying and distribution information, please see the file
#  <krb5/copyright.h>.
# 

#ifdef Krb4KDCCompat
KRB4DEF = -DKRB4
K4LIB=$(KRB4LIB)
#else
KRB4DEF =
K4LIB=
#endif
DEFINES = -DBACKWARD_COMPAT $(KRB4DEF)

INCLUDES = $(KRB4INCLUDES)
SRCS= \
	kdc5_err.c \
	dispatch.c \
	do_as_req.c \
	do_tgs_req.c \
	kdc_util.c \
	main.c \
	network.c \
	policy.c \
	extern.c \
	replay.c \
	kerberos_v4.c

OBJS= \
	kdc5_err.o \
 	dispatch.o \
	do_as_req.o \
	do_tgs_req.o \
	kdc_util.o \
	main.o \
	network.o \
	policy.o \
	extern.o \
	replay.o \
	kerberos_v4.o

ErrorTableObjectRule()

all::	krb5kdc

depend:: kdc5_err.c

kdc5_err.c: kdc5_err.et

NormalProgramTarget(krb5kdc,$(OBJS),$(KDBDEPLIB) $(DEPKLIB), \
	$(KDBLIB) $(KLIB) $(K4LIB),)
Krb5InstallServerProgram(krb5kdc)

clean::
	$(RM) kdc5_err.h kdc5_err.c

DependTarget()
