#	$Source$
#	$Author$
#	$Id$
#
#  Copyright 1990,1991 by the Massachusetts Institute of Technology.
#  All Rights Reserved.
# 
# Export of this software from the United States of America may
#   require a specific license from the United States Government.
#   It is the responsibility of any person or organization contemplating
#   export to obtain such a license before exporting.
# 
# WITHIN THAT CONSTRAINT, permission to use, copy, modify, and
# distribute this software and its documentation for any purpose and
# without fee is hereby granted, provided that the above copyright
# notice appear in all copies and that both that copyright notice and
# this permission notice appear in supporting documentation, and that
# the name of M.I.T. not be used in advertising or publicity pertaining
# to distribution of the software without specific, written prior
# permission.  M.I.T. makes no representations about the suitability of
# this software for any purpose.  It is provided "as is" without express
# or implied warranty.
# 
# 

#ifdef Krb4KDCCompat
KRB4DEF = -DKRB4
K4LIB=$(KRB4LIB)
#else
KRB4DEF =
K4LIB=
#endif
DEFINES = -DBACKWARD_COMPAT $(KRB4DEF)

INCLUDES = $(KRB4INCLUDES) -I.
SRCS= \
	kdc5_err.c \
	$(SRCDIR)dispatch.c \
	$(SRCDIR)do_as_req.c \
	$(SRCDIR)do_tgs_req.c \
	$(SRCDIR)kdc_util.c \
	$(SRCDIR)main.c \
	$(SRCDIR)network.c \
	$(SRCDIR)policy.c \
	$(SRCDIR)extern.c \
	$(SRCDIR)replay.c \
	$(SRCDIR)kerberos_v4.c

OBJS= \
	kdc5_err.o \
 	dispatch.o \
	do_as_req.o \
	do_tgs_req.o \
	kdc_util.o \
	main.o \
	network.o \
	policy.o \
	extern.o \
	replay.o \
	kerberos_v4.o

ErrorTableObjectRule()

all::	krb5kdc

depend:: kdc5_err.c

kdc5_err.c: kdc5_err.et

NormalProgramTarget(krb5kdc,$(OBJS),$(KDBDEPLIB) $(DEPKLIB), \
	$(KDBLIB) $(KLIB) $(K4LIB),)
Krb5InstallServerProgram(krb5kdc)

clean::
	$(RM) kdc5_err.h kdc5_err.c

DependTarget()
