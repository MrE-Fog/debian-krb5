CFLAGS = $(CCOPTS) $(DEFS) $(LOCALINCLUDE)

all::

LOCALINCLUDE=-I$(SRCTOP)/include/kerberosIV -I$(BUILDTOP)/include/kerberosIV

OBJS= kdb5_edit.o \
	kdb5_ed_ct.o \
	cpw.o \
	util.o \
	dump.o \
	dumpv4.o \
	loadv4.o \
	ss_wrapper.o \
	$(LIBOBJS)

SRCS= $(srcdir)/kdb5_edit.c \
	$(srcdir)/kdb5_ed_ct.c \
	$(srcdir)/cpw.c \
	$(srcdir)/util.c \
	$(srcdir)/dump.c \
	$(srcdir)/ss_wrapper.c \
	$(srcdir)/dumpv4.c \
	$(srcdir)/loadv4.c

all:: kdb5_edit

kdb5_edit: kdb5_edit.o $(DEPLIBS) $(OBJS)
	$(LD) $(LDFLAGS) $(LDARGS) -o kdb5_edit $(OBJS) $(LIBS)

install::
	$(INSTALL_PROGRAM) kdb5_edit ${DESTDIR}$(ADMIN_BINDIR)/kdb5_edit
	$(INSTALL_DATA) $(srcdir)/kdb5_edit.M ${DESTDIR}$(ADMIN_MANDIR)/kdb5_edit.8

# needed until we run makedepend
kdb5_ed_ct.c: kdb5_ed_ct.ct

kdb5_ed_ct.o: kdb5_ed_ct.c

clean::
	$(RM) kdb5_ed_ct.c

depend:: kdb5_ed_ct.c

clean::
	$(RM) kdb5_edit 
