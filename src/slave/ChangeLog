Sat May 20 13:46:36 1995  Ezra Peisach  <epeisach@kangaroo.mit.edu>

	* kpropd.c (load_database): If realm specified then invoke
		kdb5_edit with -r option.

	* kprop.M: Document -P (port) option.

	* kpropd.M: Document -P (port) option.

	* kprop.h: KPROPD_DEFAULT_KDB5_EDIT was pointing to wrong place.

Mon May 15 13:11:15 1995  Ezra Peisach  <epeisach@kangaroo.mit.edu>

	* kpropd.c (recv_database): Use krb5_int32 for over the wire
	database length. 
	(kerberos_authenticate): Make keytab support work

	* kprop.c (PRS): Add support for keytab and port specification.
	(xmit_database): Use krb5_int32 for length of database to go over
		the wire. 
	(kerberos_authenticate): Add krb5_auth_setaddrs call

Wed May 03 03:30:51 1995  Chris Provenzano (proven@mit.edu)

        * kpropd.c: (krb5_recvauth()): No longer needs the rc_type arg.

Fri Apr 14 15:23:29 1995    <tytso@rsx-11.mit.edu>

	* kpropd.c (load_database): kpropd uses fork instead of vfork,
		because it's closing file descriptors in the child.

		Print out the pid of the child process if debugging is
		enabled. 

		Use _exit() instead exit() after a fork(), so that child
		process doesn't cause the stdio buffers don't get flushed
		twice.

		When debugging is enabled and kpropd can't bind to the
		port, it should try binding again after setting
		SO_REUSEADDR on the socket.  This avoids problems when
		debugging modifications to kprop/kpropd or its setup, when
		kpropd is run twice quickly in succession. 

		kpropd shouldn't signal(SIGCHLD, SIG_IGN) in the parent.
		Instead, it should wait() until the child exits.  This was
		causing problems because setting SIGCHLD to SIG_IGN under
		SYSV causes child processes to get reaped automatically,
		so the wait() for kdb5_edit was failing.

Mon Mar 27 07:56:26 1995 Chris Provenzano (proven@mit.edu)

        * kprop.c : Use new calling conventions for krb5_sendauth(),
		krb5_mk_safe(), krb5_rd_safe() and krb5_mk_priv().

        * kpropd.c : Use new calling conventions for krb5_recvauth(),
		krb5_mk_safe(), krb5_rd_safe() and krb5_rd_priv().

Fri Mar 24 14:49:41 1995    <tytso@rsx-11.mit.edu>

	* kpropd.c (PRS): Don't bother initializing server_addrs since
		it's not used.

	* kprop.c (get_tickets): Remove the call to krb5_os_localaddr() since
		get_in_tkt_XXXX will default appropriately.

Thu Mar  2 12:26:08 1995  Theodore Y. Ts'o  <tytso@dcl>

	* Makefile.in (ISODELIB): Remove reference to $(ISODELIB).

Wed Mar  1 16:31:13 1995  Theodore Y. Ts'o  <tytso@dcl>

	* configure.in: Remove ISODE_INCLUDE, replace check for -lsocket
		and -lnsl with WITH_NETLIB check.

Tue Feb 28 01:21:52 1995  John Gilmore  (gnu at toad.com)

	* kprop.c, kpropd.c:  Avoid <krb5/...> includes.

Tue Feb 14 15:30:55 1995 Chris Provenzano  (proven@mit.edu)

        * kprop.c Call krb5_sendauth() with new calling convention.

	* kprop.c (kerberos_authenticate()), (xmit_database()), cleaned up
		to not use globals. Instead use krb5_creds * args.

Fri Feb 03 18:39:24 1995  Chris Provenzano (proven@mit.edu)

	* kprop.c Use krb5_get_in_tkt_with_keytab() instead of
		 krb5_get_in_tkt_with_skey().

Fri Jan 13 15:23:47 1995  Chris Provenzano (proven@mit.edu)

    * Added krb5_context to all krb5_routines

Thu Nov 17 18:31:18 1994  Mark Eichin  (eichin@cygnus.com)

	* kprop.c: Use NPROTOTYPE for declarations.
	(close_database): New function. Cleans up locks properly.
	(main): call it.
	(open_database): Use krb5_lock_file instead of POSIX_FILE_LOCKS.
	* kpropd.c (doit): Use krb5_lock_file.
	(changes from jtkohl@mit.edu.)

Mon Oct  3 19:13:46 1994  Theodore Y. Ts'o  (tytso@dcl)

	* Makefile.in: Use $(srcdir) to find manual page for make install.

Thu Sep 29 22:15:27 1994  Theodore Y. Ts'o  (tytso@dcl)

	* Makefile.in: Relink executable if libraries change.

	* kprop.c (open_connection): Use getsockname instead of
		getpeername when getting the sender address.

Thu Sep 15 12:48:21 1994  Theodore Y. Ts'o  (tytso@dcl)

	* kpropd.c (PRS): Only report errors to syslog if the debug flag
	is not set.  (Otherwise, send them to stderr).

Thu Aug  4 15:15:00 1994  Tom Yu  (tlyu@dragons-lair)

	* configure.in:
	* kpropd.c: include <sgtty.h> only if POSIX_TERMIOS is not defined

Sat Jul 16 00:01:41 1994  Theodore Y. Ts'o  (tytso at tsx-11)

	* kpropd.c (do_standalone): Replace detach_process() with call to
	  daemon(), which we can now guarantee will be in libc or in the
	  Kerberos library.


