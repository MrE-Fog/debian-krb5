CFLAGS = $(CCOPTS) $(DEFS) $(LOCALINCLUDE)
LDFLAGS = -g

COMERRLIB=$(BUILDTOP)/util/et/libcom_err.a
KDBLIB=-lkdb5 

KLIB = -lkrb5 -lcrypto $(COMERRLIB) 
DEPKLIB = $(TOPLIBD)/libkrb5.a $(TOPLIBD)/libcrypto.a $(COMERRLIB) 

all::


        DEPLIBS = $(DEPKLIB)
LOCAL_LIBRARIES = $(KLIB)

CLIENTSRCS= $(srcdir)/kprop.c 
CLIENTOBJS= kprop.o 

SERVERSRCS= $(srcdir)/kpropd.c 
SERVEROBJS= kpropd.o 

SRCS= $(CLIENTSRCS) $(SERVERSRCS)

all::	kprop kpropd

kprop: $(CLIENTOBJS) $(DEPLIBS)
	$(LD) $(LDFLAGS) $(LDARGS) -o kprop $(CLIENTOBJS) $(LOCAL_LIBRARIES) $(LIBS)

install::
	$(INSTALL_PROGRAM) kprop ${DESTDIR}$(SERVER_BINDIR)/kprop
	$(INSTALL_DATA) $(srcdir)/kprop.M ${DESTDIR}$(SERVER_MANDIR)/kprop.8

kpropd: $(SERVEROBJS) $(DEPLIBS)
	$(LD) $(LDFLAGS) $(LDARGS) -o kpropd $(SERVEROBJS) $(LOCAL_LIBRARIES) $(LIBS)

install::
	$(INSTALL_PROGRAM) kpropd ${DESTDIR}$(SERVER_BINDIR)/kpropd
	$(INSTALL_DATA) $(srcdir)/kpropd.M ${DESTDIR}$(SERVER_MANDIR)/kpropd.8

clean::
	$(RM) $(CLIENTOBJS) $(SERVEROBJS)

clean::
	$(RM) kprop kpropd

