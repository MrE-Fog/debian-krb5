#!/bin/sh

force=
autoreconfprog=./util/autoconf/autoreconf
autoreconfoptions="-m util/autoconf"
verbose=false

autoreconf="/bin/sh $autoreconfprog"

usage="Usage: $0 [--force] [--verbose] [--help]"
for option
do
  case "$option" in
  --force | -f)
    echo "Remaking all configuration files"
    force=--force ;;
  -help | --help | --hel | --he | --h)
    echo "$usage"; exit 0 ;;
  -v | --verbose)
    verbose=true ;;
  *) echo "$usage"; exit 1 ;;
  esac
done

# Currently (2000-10-03) we need 2.12 or later, and 2.13 is current.
pat="version 2.1[23456789]"
if test ! -f $autoreconfprog ; then
	if autoreconf --version | grep "$pat" >/dev/null && \
	   autoconf --version  | grep "$pat" >/dev/null && \
	   autoheader --version | grep "$pat" >/dev/null; then
		autoreconf=autoreconf
		autoreconfoptions=
		echo "Using" `autoconf --version` "found in your path..."
	else
		echo "Couldn't find autoconf 2.12 or higher in your path."
		echo " "
		echo "Please cd to util/autoconf, and type the commands"
		echo "'configure' and then 'make'; then cd back to the top"
		echo "of the source tree and re-run ./util/reconf"
		exit 1
	fi
fi

if $verbose ; then 
	echo $autoreconf $autoreconfoptions -l . --verbose $force 
fi
$autoreconf $autoreconfoptions  -l . --verbose $force 
