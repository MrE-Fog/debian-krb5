#	$Source$
#	$Author$
#	$Id$
#
#  Copyright 1993 by the Massachusetts Institute of Technology.
#  All Rights Reserved.
# 
# Export of this software from the United States of America may
#   require a specific license from the United States Government.
#   It is the responsibility of any person or organization contemplating
#   export to obtain such a license before exporting.
# 
# WITHIN THAT CONSTRAINT, permission to use, copy, modify, and
# distribute this software and its documentation for any purpose and
# without fee is hereby granted, provided that the above copyright
# notice appear in all copies and that both that copyright notice and
# this permission notice appear in supporting documentation, and that
# the name of M.I.T. not be used in advertising or publicity pertaining
# to distribution of the software without specific, written prior
# permission.  M.I.T. makes no representations about the suitability of
# this software for any purpose.  It is provided "as is" without express
# or implied warranty.
# 
# 
NormalLibraryObjectRule()

#ifdef HasVfprintf
VPOBJS=
VPSRCS=
#else
VPOBJS=vfprintf.o 
VPSRCS=$(SRCDIR)vfprintf.c
#endif

OBJS=	error_message.o et_name.o init_et.o com_err.o $(VPOBJS)
SRCS=	error_message.c et_name.c init_et.c com_err.c $(VPSRCS)
#ifndef LinuxArchitecture
DEFINES= -DNEED_SYS_ERRLIST
#endif

Krb5LibraryTarget(com_err,$(OBJS))

compile_et: compile_et.sh
	./config_script compile_et.sh $(AWK) > compile_et
	chmod +x compile_et

all:: compile_et

includes:: compile_et
	-$(RM) -f $(TOP)/include/com_err.h
	$(LN) ../$(CURRENT_DIR)/com_err.h $(TOP)/include

clean::
	$(RM) compile_et
