#!/bin/sh
#
# makeshlib: Make a shared library.....
#
# Usage: makeshlib <host> <CC> <library> <directories>
#

host=$1 ; shift
CC=$1 ; shift
library=$1 ; shift

case $host in
*-*-solaris*)
	FILES=`for i 
	do
		sed -e "s;^;$i/shared/;" -e "s; ; $i/shared/;g" $i/DONE
	done`

	echo $CC -G -o $library $FILES
	$CC -G -o $library $FILES
	;;
alpha-*-osf*)
	FILES=`for i 
	do
		sed -e "s;^;$i/;" -e "s; ; $i/;g" $i/DONE

	done`

	echo 	ld -shared -o $library -all $FILES -none -lc -update_registry ../../so_locations
	ld -shared -o $library -all $FILES -none -lc -update_registry ../../so_locations
	;;

*)
	echo "Host type $host not supported!"
	exit 1
esac
