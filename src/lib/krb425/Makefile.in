BUILDTOP=@BUILDTOP@
RANLIB = @RANLIB@
ARCHIVE = @ARCHIVE@
ARADD = @ARADD@

srcdir = @srcdir@
VPATH = @srcdir@

DEFS = @DEFS@
CC = @CC@
CCOPTS = @CCOPTS@
LIBS = @LIBS@
KRB5ROOT = @KRB5ROOT@
 
CFLAGS = $(CCOPTS) $(DEFS) -I$(SRCTOP)/include/kerberosIV
LDFLAGS = -g

KRB5MANROOT = $(KRB5ROOT)/man
ADMIN_BINDIR = $(KRB5ROOT)/admin
SERVER_BINDIR = $(KRB5ROOT)/sbin
CLIENT_BINDIR = $(KRB5ROOT)/bin
ADMIN_MANDIR = $(KRB5MANROOT)/man8
SERVER_MANDIR = $(KRB5MANROOT)/man8
CLIENT_MANDIR = $(KRB5MANROOT)/man1
FILE_MANDIR = $(KRB5MANROOT)/man5
KRB5_LIBDIR = $(KRB5ROOT)/lib
KRB5_INCDIR = $(KRB5ROOT)/include
KRB5_INCSUBDIRS = \
	$(KRB5_INCDIR)/krb5 \
	$(KRB5_INCDIR)/asn.1 \
	$(KRB5_INCDIR)/kerberosIV

EHDRDIR = $(BUILDTOP)/include/kerberosIV

RM = rm -f
CP = cp

AWK = @AWK@

SRCTOP = $(srcdir)/$(BUILDTOP)

all:: krb_err.h includes $(OBJS)

OBJS=	425data.o \
	425error.o \
	des_sched.o \
	get_cred.o \
	get_krbhst.o \
	get_lrealm.o \
	get_phost.o \
	kn_parse.o \
	kntoln.o \
	krb_err.o \
	kuserok.o \
	mk_priv.o \
	mk_req.o \
	mk_safe.o \
	net_read.o \
	net_write.o \
	rd_priv.o \
	rd_req.o \
	rd_safe.o \
	realmhost.o \
	recvauth.o \
	sendauth.o \
	set_key.o

SRCS=	$(srcdir)/425data.c \
	$(srcdir)/425error.c \
	$(srcdir)/des_sched.c \
	$(srcdir)/get_cred.c \
	$(srcdir)/get_krbhst.c \
	$(srcdir)/get_lrealm.c \
	$(srcdir)/get_phost.c \
	$(srcdir)/kn_parse.c \
	$(srcdir)/kntoln.c \
	$(srcdir)/krb_err.c \
	$(srcdir)/kuserok.c \
	$(srcdir)/mk_priv.c \
	$(srcdir)/mk_req.c \
	$(srcdir)/mk_safe.c \
	$(srcdir)/net_read.c \
	$(srcdir)/net_write.c \
	$(srcdir)/rd_priv.c \
	$(srcdir)/rd_req.c \
	$(srcdir)/rd_safe.c \
	$(srcdir)/realmhost.c \
	$(srcdir)/recvauth.c \
	$(srcdir)/sendauth.c \
	$(srcdir)/set_key.c

krb_err.o: krb_err.c

libkrb425.a: ${OBJS}
	$(RM) $@
	$(ARADD) $@ $(OBJS)
	$(RANLIB) $@
	$(RM) $(TOPLIBD)/libkrb425.a
	$(CP) libkrb425.a $(BUILDTOP)/lib/libkrb425.a
	$(RANLIB) $(BUILDTOP)/lib/libkrb425.a

install:: libkrb425.a
	$(RM) $(KRB5_LIBDIR)/libkrb425.a
	$(CP) libkrb425.a $(KRB5_LIBDIR)/libkrb425.a
	$(RANLIB) $(KRB5_LIBDIR)/libkrb425.a

clean::
	$(RM) $(OBJS)

clean::
	$(RM) libkrb425.a

clean::
	$(RM) krb_err.h krb_err.c
