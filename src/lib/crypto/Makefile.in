CFLAGS = $(CCOPTS) $(DEFS)
LDFLAGS = -g

TST=if test -n "`cat DONE`" ; then

OBJS=	cryptoconf.o \
	des-crc.o \
	des-md5.o \
	raw-des.o

SRCS=	$(srcdir)/cryptoconf.c \
	$(srcdir)/des-crc.c \
	$(srcdir)/des-md5.c \
	$(srcdir)/raw-des.c 

all::

libcrypto.a: des/DONE md4/DONE md5/DONE crc32/DONE os/DONE $(OBJS)
	(cd des; $(TST) $(ARADD) ../$@ `cat DONE` ; fi)
	(cd crc32; $(TST) $(ARADD) ../$@ `cat DONE` ; fi)
	(cd md4; $(TST) $(ARADD) ../$@ `cat DONE` ; fi)
	(cd md5; $(TST) $(ARADD) ../$@ `cat DONE` ; fi)
	(cd os; $(TST) $(ARADD) ../$@ `cat DONE` ; fi)
	$(ARADD) $@ $(OBJS)
	$(RANLIB) $@

install:: libcrypto.a
	$(INSTALL_DATA) libcrypto.a $(DESTDIR)$(KRB5_LIBDIR)/libcrypto.a
	$(RANLIB) $(DESTDIR)$(KRB5_LIBDIR)/libcrypto.a

clean::
	$(RM) libcrypto.a
