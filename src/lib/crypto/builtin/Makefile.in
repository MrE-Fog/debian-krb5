mydir=lib/crypto/builtin
BUILDTOP=$(REL)..$(S)..$(S)..
SUBDIRS=camellia des aes md4 md5 sha1 sha2 enc_provider hash_provider
LOCALINCLUDES = -I$(srcdir)/../krb 			\
		-I$(srcdir)/../krb/hash_provider 	\
		-I$(srcdir)/des 	\
		-I$(srcdir)/aes 	\
		-I$(srcdir)/camellia 	\
		-I$(srcdir)/sha1 	\
		-I$(srcdir)/sha2 	\
		-I$(srcdir)/md4 	\
		-I$(srcdir)/md5	\
		-I$(srcdir)/enc_provider	\
		-I$(srcdir)/hash_provider 	
RUN_SETUP = @KRB5_RUN_ENV@
PROG_LIBPATH=-L$(TOPLIBD)
PROG_RPATH=$(KRB5_LIBDIR)
DEFS=

EXTRADEPSRCS= $(srcdir)/t_cf2.c 


##DOS##BUILDTOP = ..\..\..
##DOS##PREFIXDIR = builtin
##DOS##OBJFILE = ..\$(OUTPRE)builtin.lst

STLIBOBJS=\
	hmac.o	\
	init.o	\
	pbkdf2.o

OBJS=\
	$(OUTPRE)hmac.$(OBJEXT)	\
	$(OUTPRE)init.$(OBJEXT)	\
	$(OUTPRE)pbkdf2.$(OBJEXT)

SRCS=\
	$(srcdir)/hmac.c	\
	$(srcdir)/init.c	\
	$(srcdir)/pbkdf2.c	

STOBJLISTS= des/OBJS.ST md4/OBJS.ST 	\
	md5/OBJS.ST sha1/OBJS.ST sha2/OBJS.ST	\
	enc_provider/OBJS.ST 		\
	hash_provider/OBJS.ST 		\
	aes/OBJS.ST 			\
	camellia/OBJS.ST 		\
	OBJS.ST

SUBDIROBJLISTS= des/OBJS.ST md4/OBJS.ST 	\
		md5/OBJS.ST sha1/OBJS.ST sha2/OBJS.ST 	\
		enc_provider/OBJS.ST 		\
		hash_provider/OBJS.ST 		\
		aes/OBJS.ST			\
		camellia/OBJS.ST 

##DOS##LIBOBJS = $(OBJS)

all-unix:: all-libobjs
includes:: depend

depend:: $(SRCS)

clean-unix:: clean-libobjs
check-unix:: t_cf2
	$(RUN_SETUP) $(VALGRIND) ./t_cf2 <$(srcdir)/t_cf2.in >t_cf2.output
	diff t_cf2.output $(srcdir)/t_cf2.expected

t_cf2$(EXEEXT): t_cf2.$(OBJEXT) $(SUPPORT_DEPLIB)
	$(CC_LINK) -o $@ t_cf2.$(OBJEXT)  -lkrb5 -lk5crypto -lcom_err $(SUPPORT_LIB)

clean::
	$(RM)  t_cf2 t_cf2.o  t_cf2.output




all-windows::
	cd des
	@echo Making in crypto\builtin\des
	$(MAKE) -$(MFLAGS)
	cd ..\md4
	@echo Making in crypto\builtin\md4
	$(MAKE) -$(MFLAGS)
	cd ..\md5
	@echo Making in crypto\builtin\md5
	$(MAKE) -$(MFLAGS)
	cd ..\sha1
	@echo Making in crypto\builtin\sha1
	$(MAKE) -$(MFLAGS)
	cd ..\sha2
	@echo Making in crypto\builtin\sha2
	$(MAKE) -$(MFLAGS)
	cd ..\hash_provider
	@echo Making in crypto\builtin\hash_provider
	$(MAKE) -$(MFLAGS)
	cd ..\enc_provider
	@echo Making in crypto\builtin\enc_provider
	$(MAKE) -$(MFLAGS)
	cd ..\aes
	@echo Making in crypto\builtin\aes
	$(MAKE) -$(MFLAGS)
	cd ..\camellia
	@echo Making in crypto\builtin\camellia
	$(MAKE) -$(MFLAGS)
	cd ..
	@echo Making in crypto\builtin

clean-windows::
	cd des
	@echo Making clean in crypto\builtin\des
	$(MAKE) -$(MFLAGS) clean
	cd ..\md4
	@echo Making clean in crypto\builtin\md4
	$(MAKE) -$(MFLAGS) clean
	cd ..\md5
	@echo Making clean in crypto\builtin\md5
	$(MAKE) -$(MFLAGS) clean
	cd ..\sha1
	@echo Making clean in crypto\builtin\sha1
	$(MAKE) -$(MFLAGS) clean
	cd ..\sha2
	@echo Making clean in crypto\builtin\sha2
	$(MAKE) -$(MFLAGS) clean
	cd ..\hash_provider
	@echo Making clean in crypto\builtin\hash_provider
	$(MAKE) -$(MFLAGS) clean
	cd ..\enc_provider
	@echo Making clean in crypto\builtin\enc_provider
	$(MAKE) -$(MFLAGS) clean
	cd ..\aes
	@echo Making clean in crypto\builtin\aes
	$(MAKE) -$(MFLAGS) clean
	cd ..\camellia
	@echo Making clean in crypto\builtin\camellia
	$(MAKE) -$(MFLAGS) clean
	cd ..
	@echo Making clean in crypto\builtin

check-windows::
	cd des
	@echo Making check in crypto\builtin\des
	$(MAKE) -$(MFLAGS) check
	cd ..\md4
	@echo Making check in crypto\builtin\md4
	$(MAKE) -$(MFLAGS) check
	cd ..\md5
	@echo Making check in crypto\builtin\md5
	$(MAKE) -$(MFLAGS) check
	cd ..\sha1
	@echo Making check in crypto\builtin\sha1
	$(MAKE) -$(MFLAGS) check
	cd ..\sha2
	@echo Making check in crypto\builtin\sha2
	$(MAKE) -$(MFLAGS) check
	cd ..\hash_provider
	@echo Making check in crypto\builtin\hash_provider
	$(MAKE) -$(MFLAGS) check
	cd ..\enc_provider
	@echo Making check in crypto\builtin\enc_provider
	$(MAKE) -$(MFLAGS) check
	cd ..\aes
	@echo Making check in crypto\builtin\aes
	$(MAKE) -$(MFLAGS) check
	cd ..\camellia
	@echo Making check in crypto\builtin\camellia
	$(MAKE) -$(MFLAGS) check
	cd ..
	@echo Making check in crypto\builtin


@lib_frag@
@libobj_frag@

