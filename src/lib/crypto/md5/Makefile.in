CFLAGS = $(CCOPTS) $(DEFS) -I$(srcdir)/../des

##DOSBUILDTOP = ..\..\..
##DOSLIBNAME=..\crypto.lib
##DOS!include $(BUILDTOP)\config\windows.in

.c.o:
	$(CC) $(CFLAGS) -c $(srcdir)/$*.c
@SHARED_RULE@

OBJS=	md5.$(OBJEXT) md5glue.$(OBJEXT) md5crypto.$(OBJEXT)

SRCS=	$(srcdir)/md5.c $(srcdir)/md5glue.c $(srcdir)/md5crypto.c

all:: shared $(OBJS) 

shared:
	mkdir shared

t_mddriver: t_mddriver.o md5.o
	$(CC) $(CFLAGS) $(LDFLAGS) -o t_mddriver t_mddriver.o md5.o

t_mddriver.exe:
	$(CC) $(CFLAGS2) -o t_mddriver.exe t_mddriver.c md5.c

check:: t_mddriver$(EXEEXT)
	$(C)t_mddriver$(EXEEXT) -x

clean::
	$(RM) t_mddriver$(EXEEXT) t_mddriver.$(OBJEXT)
	$(RM) shared/*
