CFLAGS = $(CCOPTS) $(DEFS)

##DOSBUILDTOP = ..\..\..
##DOSLIBNAME=..\crypto.lib
##DOS!include $(BUILDTOP)\config\windows.in

.c.o:
	$(CC) $(CFLAGS) -c $(srcdir)/$*.c
@SHARED_RULE@

OBJS=	crc.$(OBJEXT)

SRCS=	$(srcdir)/crc.c $(srcdir)/crctest.c

all:: all-$(WHAT) $(OBJS)

all-unix:: shared
all-mac:: shared
all-windows::

shared:
	mkdir shared

crctest: crctest.$(OBJEXT) $(OBJS)
	$(RM) crctest
	$(CC) -o crctest crctest.$(OBJEXT) $(CFLAGS) $(LDFLAGS) $(OBJS)

crctest.exe:
	$(CC) -o crctest.exe $(CFLAGS2) $(SRCS)

check:: crctest$(EXEEXT)
	$(C)crctest$(EXEEXT) < $(srcdir)$(S)crc-test

clean:: clean-$(WHAT)
	$(RM) crctest$(EXEEXT) crctest.$(OBJEXT)

clean-unix::
	$(RM) shared/*
clean-mac::
	$(RM) shared/*
clean-windows::
