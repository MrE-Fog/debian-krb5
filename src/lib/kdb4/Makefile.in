CFLAGS = $(CCOPTS) $(DEFS) $(DEFINES)
DEFINES=-I$(srcdir)/../../include/kerberosIV

LIBNAME=libkdb4.$(LIBEXT)

BUILDTOP=$(C)$(S)$(U)$(U)
SRCS	= \
	$(srcdir)/krb_dbm.c \
	$(srcdir)/krb_lib.c \
	$(srcdir)/krb_cache.c \
	$(srcdir)/print_princ.c \
	$(srcdir)/krb_kdb_utils.c

OBJS	= \
	krb_dbm.$(OBJEXT) \
	krb_lib.$(OBJEXT) \
	krb_cache.$(OBJEXT) \
	print_princ.$(OBJEXT) \
	krb_kdb_utils.$(OBJEXT)

CODE= ${SRCS} Makefile.in

all:: $(LIBNAME)

$(LIBNAME): $(OBJS)
	$(RM) $@
	$(ARCHIVE) $@ $(OBJS)
	$(RANLIB) $@

clean::
	$(RM) $(LIBNAME)
	$(RM) $(OBJS)

install::
	$(INSTALL_DATA) $(LIBNAME) $(DESTDIR)$(KRB5_LIBDIR)/$(LIBNAME)
	$(CHMOD) 644 $(DESTDIR)$(KRB5_LIBDIR)/$(LIBNAME)
	$(RANLIB)    $(DESTDIR)$(KRB5_LIBDIR)/$(LIBNAME)
	$(CHMOD) 444 $(DESTDIR)$(KRB5_LIBDIR)/$(LIBNAME)
## 
