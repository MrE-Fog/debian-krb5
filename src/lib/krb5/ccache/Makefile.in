thisconfigdir=./..
myfulldir=lib/krb5/ccache
mydir=ccache
BUILDTOP=$(REL)$(U)$(S)$(U)$(S)$(U)
LOCAL_SUBDIRS =

LOCALINCLUDES = -I$(srcdir)$(S)ccapi $(WIN_INCLUDES)

##DOS##WIN_INCLUDES = -I$(SRCTOP)\windows\lib

##DOS##BUILDTOP = ..\..\..
##DOS##PREFIXDIR=ccache
##DOS##OBJFILE=..\$(OUTPRE)$(PREFIXDIR).lst
##WIN16##LIBNAME=..\krb5.lib

MAC_SUBDIRS = ccapi

STLIBOBJS= \
	ccbase.o \
	cccopy.o \
	ccdefault.o \
	ccdefops.o \
	cc_retr.o \
	cc_file.o cc_stdio.o cc_memory.o \
	ccfns.o \
	ser_cc.o

OBJS=	$(OUTPRE)ccbase.$(OBJEXT) \
	$(OUTPRE)cccopy.$(OBJEXT) \
	$(OUTPRE)ccdefault.$(OBJEXT) \
	$(OUTPRE)ccdefops.$(OBJEXT) \
	$(OUTPRE)cc_retr.$(OBJEXT) \
	$(OUTPRE)cc_file.$(OBJEXT) \
	$(OUTPRE)cc_stdio.$(OBJEXT) \
	$(OUTPRE)cc_memory.$(OBJEXT) \
	$(OUTPRE)ccfns.$(OBJEXT) \
	$(OUTPRE)ser_cc.$(OBJEXT)

SRCS=	$(srcdir)/ccbase.c \
	$(srcdir)/cccopy.c \
	$(srcdir)/ccdefault.c \
	$(srcdir)/ccdefops.c \
	$(srcdir)/cc_retr.c \
	$(srcdir)/cc_file.c \
	$(srcdir)/cc_stdio.c \
	$(srcdir)/cc_memory.c \
	$(srcdir)/ccfns.c \
	$(srcdir)/ser_cc.c

all-unix:: all-libobjs

t_stdio: t_stdio.o
	${CC} -o t_stdio ${OBJS} t_stdio.o

all-windows:: subdirs $(OBJFILE) 

##DOS##subdirs:: ccapi\$(OUTPRE)file.lst

##DOS##ccapi\$(OUTPRE)file.lst::
##DOS##	cd ccapi
##DOS##	@echo Making in krb5\ccache\ccapi
##DOS##	$(MAKE) -$(MFLAGS)
##DOS##	cd ..

##DOS##$(OBJFILE): $(OBJS) ccapi\$(OUTPRE)file.lst
##DOS##	$(RM) $(OBJFILE)
##WIN16##	$(CP) nul: $(OBJFILE)
##WIN32##	$(LIBECHO) -p $(PREFIXDIR)\ $(OUTPRE)*.obj \
##WIN32##		ccapi\$(OUTPRE)*.obj > $(OBJFILE)


clean-unix:: clean-libobjs

clean-windows::
	cd ccapi
	@echo Making clean in krb5\ccache\ccapi
	$(MAKE) -$(MFLAGS) clean
	cd ..
	@echo Making clean in krb5\ccache
	$(RM) $(OBJFILE)
