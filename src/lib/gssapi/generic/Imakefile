#	$Source$
#	$Author$
#	$Id$
#
#  Copyright 1993, 1994 by the Massachusetts Institute of Technology.
#  All Rights Reserved.
# 
# Export of this software from the United States of America may
#   require a specific license from the United States Government.
#   It is the responsibility of any person or organization contemplating
#   export to obtain such a license before exporting.
# 
# WITHIN THAT CONSTRAINT, permission to use, copy, modify, and
# distribute this software and its documentation for any purpose and
# without fee is hereby granted, provided that the above copyright
# notice appear in all copies and that both that copyright notice and
# this permission notice appear in supporting documentation, and that
# the name of M.I.T. not be used in advertising or publicity pertaining
# to distribution of the software without specific, written prior
# permission.  M.I.T. makes no representations about the suitability of
# this software for any purpose.  It is provided "as is" without express
# or implied warranty.
# 
# 

ETSRCS= gssapi_generic_err.c
ETOBJS= gssapi_generic_err.o
ETHDRS= gssapi_generic_err.h

#ifdef HasHashLibrary
UTIL_VALIDATE_SRC= util_validate.c
UTIL_VALIDATE_OBJ= util_validate.o
#else
UTIL_VALIDATE_SRC= util_val_nohash.c
UTIL_VALIDATE_OBJ= util_val_nohash.o
#endif

CCSRCS = \
	display_major_status.c \
	display_com_err_status.c \
	gssapi_generic.c \
	release_buffer.c \
	release_oid_set.c \
	util_buffer.c \
	util_canonhost.c \
	util_dup.c \
	util_oid.c \
	util_token.c \
	$(UTIL_VALIDATE_SRC)

CCOBJS = \
	display_major_status.o \
	display_com_err_status.o \
	gssapi_generic.o \
	release_buffer.o \
	release_oid_set.o \
	util_buffer.o \
	util_canonhost.o \
	util_dup.o \
	util_oid.o \
	util_token.o \
	$(UTIL_VALIDATE_OBJ)


EHDRDIR= $(TOP)/include/gssapi
EXPORTED_HEADERS= gssapi.h gssapi_generic.h

SRCS= $(ETSRCS) $(CCSRCS)
OBJS= $(ETOBJS) $(CCOBJS)
HDRS= $(ETHDRS)

NormalLibraryObjectRule()
ErrorTableObjectRule()

all:: $(SRCS) $(HDRS) includes $(OBJS)

clean::
	$(RM) $(ETHDRS) $(ETSRCS)

SubdirLibraryRule($(OBJS))

Krb5InstallHeaders($(EXPORTED_HEADERS), $(KRB5_INCDIR)/krb5)

includes::
	@-mkdir $(EHDRDIR)

CopyHeader(gssapi.h,$(EHDRDIR))
CopyHeader(gssapi_generic.h,$(EHDRDIR))

depend:: $(ETSRCS)

DependTarget()

SpecialObjectRule(gssapi_generic_err.o,gssapi_generic_err.c,)
